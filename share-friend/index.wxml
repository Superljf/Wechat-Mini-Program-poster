<!--pages/share-friend/index.wxml-->
<view class="share-friend-page">


  <!-- 背景装饰 -->
  <view class="bg-decoration">

    <image src="/images/login/bg.png" mode="widthFix" style="width: 100%;height: 100%;"></image>

  </view>

  <!-- 提示文字 -->
  <view class="tip-text"  bindtap="onTipTextTapTest">长按海报，即可转发好友哦~</view>

  <!-- 海报展示区域 -->
  <view class="poster-container">
    <!-- Canvas画布（隐藏） -->
    <canvas 
      id="{{canvasId}}" 
      type="2d" 
      class="poster-canvas"
      style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
    ></canvas>
    
    <!-- 旧版Canvas（备用） -->
    <canvas 
      canvas-id="{{canvasId}}"
      class="poster-canvas old-canvas"
      style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
    ></canvas>
    <!-- <image src="{{qrcodeUrl}}" mode="widthFix" style="width: 100%;height: 100%;"></image> -->

    
    <!-- 海报预览图 -->
    <view class="poster-preview" wx:if="{{posterImagePath && !isGenerating}}">
      <image 
        class="poster-image" 
        src="{{posterImagePath}}" 
        mode="aspectFit"
        show-menu-by-longpress="{{true}}"
        ></image>
    </view>

    <!-- 加载状态 -->
    <view class="poster-loading" wx:if="{{isGenerating}}">
      <view class="loading-spinner"></view>
      <view class="loading-text">
        <text>生成海报中</text>
        <view class="loading-dots">
          <text class="dot dot1">.</text>
          <text class="dot dot2">.</text>
          <text class="dot dot3">.</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 分享选项 -->
  <!-- <view class="share-options">
    <view class="share-option" bindtap="onShareToFriend">
      <view class="share-icon-container">
        <view class="wechat-icon">
          <view class="wechat-bg"></view>
          <view class="wechat-bubble wechat-bubble-1"></view>
          <view class="wechat-bubble wechat-bubble-2"></view>
        </view>
      </view>
      <view class="share-label">微信好友</view>
    </view>

    <view class="share-option" bindtap="onShareToMoments">
      <view class="share-icon-container">
        <view class="moments-icon">
          <view class="moments-flower moments-flower-1"></view>
          <view class="moments-flower moments-flower-2"></view>
          <view class="moments-flower moments-flower-3"></view>
          <view class="moments-flower moments-flower-4"></view>
          <view class="moments-flower moments-flower-5"></view>
          <view class="moments-flower moments-flower-6"></view>
          <view class="moments-flower moments-flower-7"></view>
          <view class="moments-flower moments-flower-8"></view>
        </view>
      </view>
      <view class="share-label">微信朋友圈</view>
    </view>
  </view> -->

  <!-- 底部安全区域 -->
  <view class="bottom-safe-area"></view>
</view>

<!-- Toast组件 -->
<van-toast id="van-toast" />
